############################################################################################
# Ledger Application Configuration
#
# This file overrides the application configuration properties.
# For all spring boot container properties, see:
#  https://docs.spring.io/spring-boot/appendix/application-properties/index.html
############################################################################################

spring:
  ## Default datasource (insecure)
  datasource:
    url: jdbc:postgresql://localhost:26257/ledger?sslmode=disable
    username: root
    password:
    hikari:
      transaction-isolation: TRANSACTION_SERIALIZABLE

  ## Default datasource (secure)
#  datasource:
#    url: jdbc:postgresql://localhost:26257/ledger?sslmode=require
#    username: craig
#    password: cockroach
#    hikari:
#      transaction-isolation: TRANSACTION_SERIALIZABLE

  ## Alternative datasource (Cloud)
#  datasource:
#    url: jdbc:postgresql://valhalla-qzx.aws-eu-north-1.cockroachlabs.cloud:26257/ledger?sslmode=require
#    username: craig
#    password: cockroach
#    hikari:
#      transaction-isolation: TRANSACTION_SERIALIZABLE

application:
  ## Use pre-emptive locks when reading with the intent to write.
  # WARNING: It's imperative for correctness under READ_COMMITTED to set this to true.
  # If set to false, you may see lost update (P4) anomalies under READ_COMMITTED.
  # Under serializable (1SR), correctness is never compromised and locking may
  # help to reduce contention.
  using-locks: true
  ## Enable idempotency check for each transfer request (one extra point read).
  idempotency-check: false
  ## Ledger is I/O bound and uses JDK21 virtual threads rather than thread pools.
  task-executor:
    # A negative value denotes an unbounded amount of concurrent tasks.
    # For best performance on high-end machines, leave this value as-is.
    concurrency-limit: -1
  ## Sample period for time-series data points in graphs
  sample-period-seconds: 300
  ## Default account plan settings
  account-plan:
    # Number of accounts per city
    accounts-per-city: 5_000
    # Initial balance for user asset accounts (in local currency)
    initial-balance: 5000.00

  ## Region to city mappings.
  #
  # A region name SHOULD match an existing locality region tier but can also be mapped (--locality=region=aws-us-east-1,..).
  # A region cities SHOULD include cities in the region's proximity.
  # A region MAY have e ISO-3166-1 country code and ISO-4217 currency code for all its cities.
  # A city MUST have a name, country code and currency code.
  # A city MAY override the country and currency code of the region.
  regions:
    - name: NAMR
      country: USA
      currency: USD
      cities:
        - name: new york
        - name: boston
        - name: washington dc
        - name: miami
        - name: charlotte
        - name: atlanta
        - name: st louis
        - name: indianapolis
        - name: nashville
        - name: dallas
        - name: houston
        - name: detroit
        - name: san francisco
        - name: los angeles
        - name: san diego
        - name: las vegas
        - name: salt lake city
        - name: seattle
        - name: tacoma
        - name: portland
        - name: salem
        - name: bend
        - name: eugene
        - name: phoenix
        - name: minneapolis
        - name: chicago
        - name: detroit
        - name: calgary
          country: CAN
          currency: CAD
        - name: edmonton
          country: CAN
          currency: CAD
        - name: winnipeg
          country: CAN
          currency: CAD
        - name: regina
          country: CAN
          currency: CAD
        - name: brandon
          country: CAN
          currency: CAD
        - name: dryden
          country: CAN
          currency: CAD
        - name: sao paulo
          country: BRA
          currency: BRL
        - name: rio de janeiro
          country: BRA
          currency: BRL
        - name: salvador
          country: BRA
          currency: BRL
        - name: buenos aires
          currency: ARS
          country: ARG
    - name: EMEA
      cities:
        - name: berlin
          country: DEU
          currency: EUR
        - name: hamburg
          country: DEU
          currency: EUR
        - name: munich
          country: DEU
          currency: EUR
        - name: frankfurt
          country: DEU
          currency: EUR
        - name: dusseldorf
          country: DEU
          currency: EUR
        - name: leipzig
          country: DEU
          currency: EUR
        - name: dortmund
          country: DEU
          currency: EUR
        - name: essen
          country: DEU
          currency: EUR
        - name: stuttgart
          country: DEU
          currency: EUR
        - name: zurich
          country: CHE
          currency: CHF
        - name: krakov
          country: POL
          currency: PLN
        - name: zagraeb
          country: HRV
          currency: EUR
        - name: zaragoza
          country: ESP
          currency: EUR
        - name: lodz
          country: POL
          currency: PLN
        - name: athens
          country: GRC
          currency: EUR
        - name: bratislava
          country: SVK
          currency: EUR
        - name: prague
          country: ZCE
          currency: CZK
        - name: sofia
          country: BGR
          currency: BGN
        - name: bucharest
          country: ROU
          currency: RON
        - name: vienna
          country: AUT
          currency: EUR
        - name: warsaw
          country: POL
          currency: PLN
        - name: budapest
          country: HUN
          currency: HUF
        - name: dublin
          country: IRL
          currency: EUR
        - name: belfast
          country: GBR
          currency: GBP
        - name: liverpool
          country: GBR
          currency: GBP
        - name: manchester
          country: GBR
          currency: GBP
        - name: glasgow
          country: GBR
          currency: GBP
        - name: birmingham
          country: GBR
          currency: GBP
        - name: leeds
          country: GBR
          currency: GBP
        - name: london
          country: GBR
          currency: GBP
        - name: amsterdam
          country: NLD
          currency: EUR
        - name: rotterdam
          country: NLD
          currency: EUR
        - name: antwerp
          country: BEL
          currency: EUR
        - name: hague
          country: NLD
          currency: EUR
        - name: ghent
          country: BEL
          currency: EUR
        - name: brussels
          country: BEL
          currency: EUR
        - name: lisbon
          country: PRT
          currency: PTE
        - name: lyon
          country: FRA
          currency: EUR
        - name: toulouse
          country: FRA
          currency: EUR
        - name: paris
          country: FRA
          currency: EUR
        - name: cologne
          country: FRA
          currency: EUR
        - name: seville
          country: FRA
          currency: EUR
        - name: marseille
          country: FRA
          currency: EUR
        - name: rome
          country: ITA
          currency: EUR
        - name: milan
          country: ITA
          currency: EUR
        - name: naples
          country: ITA
          currency: EUR
        - name: turin
          country: ITA
          currency: EUR
        - name: valencia
          country: ITA
          currency: EUR
        - name: palermo
          country: ITA
          currency: EUR
        - name: madrid
          country: ESP
          currency: EUR
        - name: barcelona
          country: ESP
          currency: EUR
        - name: sintra
          country: ESP
          currency: EUR
        - name: lisbon
          country: PRT
          currency: PTE
        - name: stockholm
          country: SWE
          currency: SEK
        - name: copenhagen
          country: DNK
          currency: DKK
        - name: helsinki
          country: FIN
          currency: EUR
        - name: oslo
          country: NOR
          currency: NOK
        - name: riga
          country: LVA
          currency: EUR
        - name: tallinn
          country: EST
          currency: EUR
        - name: bahrain
          country: BHR
          currency: BHD
        - name: tel aviv
          country: ISR
          currency: ILS
        - name: dubai
          country: SAU
          currency: SAR
        - name: cairo
          country: EGY
          currency: EGP
        - name: amman
          country: JOR
          currency: JOD
        - name: cape town
          country: ZAF
          currency: ZAR
        - name: durban
          country: ZAF
          currency: ZAR
        - name: johannesburg
          country: ZAF
          currency: ZAR
        - name: pretoria
          country: ZAF
          currency: ZAR
        - name: grahamstown
          country: ZAF
          currency: ZAR
        - name: kimberley
          country: ZAF
          currency: ZAR
    - name: APAC
      cities:
        - name: hong kong
          country: HKG
          currency: HKD
        - name: beijing
          country: CHN
          currency: CNY
        - name: shanghai
          country: CHN
          currency: CNY
        - name: tokyo
          country: JPN
          currency: JPY
        - name: singapore
          country: SGP
          currency: SGD
        - name: jakarta
          country: IDN
          currency: IDR
        - name: sydney
          country: AUS
          currency: AUD
        - name: melbourne
          country: AUS
          currency: AUD

  ## CockroachDB Cloud region mapping to application regions (one-to-many).
  #
  # The key SHOULD match an existing locality region tier (--locality=region=aws-us-east-1,..).
  # The value SHOULD match a name in the 'regions' list above.
  # A region do NOT need to exist in the cluster.
  region-mappings:
    ## k3s regions
    APAC: APAC
    EMEA: EMEA
    NAMR: NAMR